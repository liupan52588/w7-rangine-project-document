(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-133f1fff"],{"11e9":function(t,e,r){var a=r("52a7"),i=r("4630"),o=r("6821"),n=r("6a99"),s=r("69a8"),c=r("c69a"),l=Object.getOwnPropertyDescriptor;e.f=r("9e1e")?l:function(t,e){if(t=o(t),e=n(e,!0),c)try{return l(t,e)}catch(r){}if(s(t,e))return i(!a.f.call(t,e),t[e])}},"1af6":function(t,e,r){var a=r("63b6");a(a.S,"Array",{isArray:r("9003")})},"20fd":function(t,e,r){"use strict";var a=r("d9f6"),i=r("aebd");t.exports=function(t,e,r){e in t?a.f(t,e,i(0,r)):t[e]=r}},3702:function(t,e,r){var a=r("481b"),i=r("5168")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(a.Array===t||o[i]===t)}},"40c3":function(t,e,r){var a=r("6b4c"),i=r("5168")("toStringTag"),o="Arguments"==a(function(){return arguments}()),n=function(t,e){try{return t[e]}catch(r){}};t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=n(e=Object(t),i))?r:o?a(e):"Object"==(s=a(e))&&"function"==typeof e.callee?"Arguments":s}},"4ee1":function(t,e,r){var a=r("5168")("iterator"),i=!1;try{var o=[7][a]();o["return"]=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(n){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],s=o[a]();s.next=function(){return{done:r=!0}},o[a]=function(){return s},t(o)}catch(n){}return r}},"549b":function(t,e,r){"use strict";var a=r("d864"),i=r("63b6"),o=r("241e"),n=r("b0dc"),s=r("3702"),c=r("b447"),l=r("20fd"),u=r("7cd6");i(i.S+i.F*!r("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,i,f,d=o(t),p="function"==typeof this?this:Array,m=arguments.length,b=m>1?arguments[1]:void 0,v=void 0!==b,_=0,h=u(d);if(v&&(b=a(b,m>2?arguments[2]:void 0,2)),void 0==h||p==Array&&s(h))for(e=c(d.length),r=new p(e);e>_;_++)l(r,_,v?b(d[_],_):d[_]);else for(f=h.call(d),r=new p;!(i=f.next()).done;_++)l(r,_,v?n(f,b,[i.value,_],!0):i.value);return r.length=_,r}})},"54a1":function(t,e,r){r("6c1c"),r("1654"),t.exports=r("95d5")},"58e0":function(t,e,r){"use strict";var a=r("dc9d"),i=r.n(a);i.a},"5dbc":function(t,e,r){var a=r("d3f4"),i=r("8b97").set;t.exports=function(t,e,r){var o,n=e.constructor;return n!==r&&"function"==typeof n&&(o=n.prototype)!==r.prototype&&a(o)&&i&&i(t,o),t}},"6ccf":function(t,e,r){"use strict";var a=r("76e5"),i=r.n(a);i.a},"76e5":function(t,e,r){},"774e":function(t,e,r){t.exports=r("d2d5")},"7cd6":function(t,e,r){var a=r("40c3"),i=r("5168")("iterator"),o=r("481b");t.exports=r("584a").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[a(t)]}},"8b97":function(t,e,r){var a=r("d3f4"),i=r("cb7c"),o=function(t,e){if(i(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:a(t,r),t}}({},!1):void 0),check:o}},9093:function(t,e,r){var a=r("ce10"),i=r("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,i)}},"95d5":function(t,e,r){var a=r("40c3"),i=r("5168")("iterator"),o=r("481b");t.exports=r("584a").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(a(e))}},"99a4":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"page-head"},[r("router-link",{attrs:{to:"/admin/user"}},[r("i",{staticClass:"el-icon-arrow-left"}),r("span",{staticStyle:{color:"#4da4fb"}},[t._v("用户管理")])]),t._v("/"),r("span",[t._v(t._s(t.$route.params.id?"编辑用户":"添加用户"))])],1),t.$route.params.id?t._e():r("div",{staticClass:"title"},[r("span",{staticClass:"active"},[t._v("1.添加成员")]),r("div",{staticClass:"title-line"}),r("span",{class:{active:!t.firstPage}},[t._v("2.设置权限")])]),r("div",{staticClass:"content"},[t.firstPage?[r("el-form",{ref:"ruleForm",staticStyle:{width:"420px"},attrs:{model:t.formData,rules:t.rules,"label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"用户账号",prop:"username"}},[r("el-input",{model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"userpass"}},[r("el-input",{attrs:{type:"password"},model:{value:t.formData.userpass,callback:function(e){t.$set(t.formData,"userpass",e)},expression:"formData.userpass"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"confirm_userpass"}},[r("el-input",{attrs:{type:"password"},model:{value:t.formData.confirm_userpass,callback:function(e){t.$set(t.formData,"confirm_userpass",e)},expression:"formData.confirm_userpass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("下一步")])],1)],1)]:[r("permission",{attrs:{user_id:t.user_id}})]],2)])},i=[],o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",{staticClass:"user-permission"},[r("el-aside",{attrs:{width:"150px"}},[t._v("项目权限")]),r("el-main",[r("div",{staticClass:"select-power search-box"},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:t.search},model:{value:t.is_public,callback:function(e){t.is_public=e},expression:"is_public"}},[r("el-option",{attrs:{label:"全部项目",value:"0"}}),r("el-option",{attrs:{label:"公有项目",value:"1"}}),r("el-option",{attrs:{label:"私有项目",value:"2"}})],1),r("div",{staticClass:"demo-input-suffix"},[r("el-input",{attrs:{placeholder:"请输入项目名称",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[r("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:t.search},slot:"suffix"})])],1),t._e()],1),r("el-table",{ref:"multipleTable",staticClass:"w7-table",attrs:{data:t.docList,"empty-text":"","row-key":"id","header-cell-style":{background:"#f7f9fc",color:"#606266"}}},[t._e(),r("el-table-column",{attrs:{label:"项目名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("i",{staticClass:"wi wi-folder"}),r("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.name))]),e.row.is_public?t._e():r("div",{staticStyle:{display:"inline-block",padding:"0 5px","margin-left":"20px",background:"#fff1de",color:"#ff8600"}},[r("i",{staticClass:"el-icon-lock"},[r("span",{staticStyle:{"margin-left":"5px"}},[t._v("私有")])])])]}}])}),r("el-table-column",{attrs:{label:"权限",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-radio-group",{staticClass:"ownership",model:{value:e.row.cur_role,callback:function(r){t.$set(e.row,"cur_role",r)},expression:"scope.row.cur_role"}},[t._l(e.row.role_list,(function(e){return[1==e.id?r("el-tooltip",{key:e.id,attrs:{effect:"dark",content:"可管理成员、阅读和编辑文档",placement:"bottom"}},[r("el-radio",{attrs:{label:1}},[t._v(t._s(e.name))])],1):t._e(),2==e.id?r("el-tooltip",{key:e.id,attrs:{effect:"dark",content:"可阅读和编辑文档",placement:"bottom"}},[r("el-radio",{attrs:{label:2}},[t._v(t._s(e.name))])],1):t._e(),3==e.id?r("el-tooltip",{key:e.id,attrs:{effect:"dark",content:"仅可以阅读",placement:"bottom"}},[r("el-radio",{attrs:{label:3}},[t._v(t._s(e.name))])],1):t._e()]}))],2)]}}])}),r("div",{staticClass:"nodata",attrs:{slot:"empty"},slot:"empty"},[r("p",[t._v("暂无可以查看管理的文档")])])],1),t.currentPage!=t.pageCount&&t.pageCount>1?r("div",{staticClass:"get-more"},[r("el-button",{attrs:{type:"text"},on:{click:t.getMore}},[t._v("点击加载更多")])],1):t._e(),r("div",{staticClass:"btns"},[r("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1),r("el-dialog",{staticClass:"w7-dialog",attrs:{title:"批量修改",visible:t.dialogEditInfoVisible,"close-on-click-modal":!1,center:""},on:{"update:visible":function(e){t.dialogEditInfoVisible=e}}},[r("el-form",{staticStyle:{"margin-left":"50px"},attrs:{"label-width":"120"}},[r("el-form-item",{attrs:{label:"公有项目"}},[r("el-radio-group",{staticClass:"ownership",model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[r("el-radio",{attrs:{label:2}},[t._v("操作员")])],1)],1),r("el-form-item",{attrs:{label:"私有项目"}},[r("el-radio-group",{staticClass:"ownership",model:{value:t.radio1,callback:function(e){t.radio1=e},expression:"radio1"}},[r("el-radio",{attrs:{label:2}},[t._v("操作员")]),r("el-radio",{attrs:{label:3}},[t._v("阅读者")])],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.editAll}},[t._v("确 定")]),r("el-button",{on:{click:function(e){t.dialogEditInfoVisible=!1}}},[t._v("取 消")])],1)],1)],1)},n=[],s=(r("c5f6"),r("a745")),c=r.n(s);function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function u(t){if(c()(t))return l(t)}var f=r("774e"),d=r.n(f),p=r("c8bb"),m=r.n(p),b=r("67bb"),v=r.n(b);function _(t){if("undefined"!==typeof v.a&&m()(Object(t)))return d()(t)}function h(t,e){if(t){if("string"===typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?d()(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(t){return u(t)||_(t)||h(t)||g()}var w={props:["user_id"],data:function(){return{is_public:"",keyword:"",docList:[],currentPage:1,pageCount:1,total:0,dialogEditInfoVisible:!1,radio:2,radio1:2,selectRows:[]}},created:function(){this.getList()},methods:{search:function(){this.currentPage=1,this.getList()},getMore:function(){this.currentPage++,this.getList("more")},getList:function(t){var e=this;this.$post("/admin/document/all-by-uid",{user_id:this.user_id,page:this.currentPage,name:this.keyword,is_public:this.is_public}).then((function(r){e.docList="more"==t?[].concat(y(e.docList),y(r.data.data)):r.data.data,e.pageCount=r.data.page_count,e.total=r.data.total}))},save:function(){var t=this,e=[];for(var r in this.docList)this.docList[r].cur_role&&e.push({document_id:this.docList[r].id,permission:this.docList[r].cur_role});e.length?this.$post("/admin/user/batch-update-permission",{user_id:this.user_id,document_permission:e}).then((function(){t.$message("保存成功！"),t.$router.push("/admin/user")})):this.$router.push("/admin/user")},editAll:function(){var t=this.$refs.multipleTable.selection;for(var e in t)t[e].is_public?t[e].cur_role=Number(this.radio):t[e].cur_role=Number(this.radio1);this.dialogEditInfoVisible=!1}}},x=w,k=(r("6ccf"),r("2877")),C=Object(k["a"])(x,o,n,!1,null,null,null),A=C.exports,I={components:{permission:A},data:function(){var t=this,e=function(e,r,a){""===r?a(new Error("请输入密码")):(""!==t.formData.confirm_userpass&&t.$refs.ruleForm.validateField("confirm_userpass"),a())},r=function(e,r,a){""===r?a(new Error("请再次输入密码")):r!==t.formData.userpass?a(new Error("两次输入密码不一致!")):a()};return{rules:{username:[{required:!0,message:"请输入用户账号",trigger:"blur"}],userpass:[{required:!0,validator:e,trigger:"blur"}],confirm_userpass:[{required:!0,validator:r,trigger:"blur"}]},firstPage:!0,formData:{id:this.$route.params.id,username:"",userpass:"",confirm_userpass:""},user_id:""}},created:function(){this.$route.params.id&&(this.user_id=this.$route.params.id,this.firstPage=!1)},methods:{onSubmit:function(){var t=this;this.$refs["ruleForm"].validate((function(e){e&&t.$post("/admin/user/add",t.formData).then((function(e){t.$message("创建成功！"),t.user_id=e.data,t.firstPage=!1}))}))}}},E=I,S=(r("58e0"),Object(k["a"])(E,a,i,!1,null,"5df92025",null));e["default"]=S.exports},a745:function(t,e,r){t.exports=r("f410")},aa77:function(t,e,r){var a=r("5ca1"),i=r("be13"),o=r("79e5"),n=r("fdef"),s="["+n+"]",c="​",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),f=function(t,e,r){var i={},s=o((function(){return!!n[t]()||c[t]()!=c})),l=i[t]=s?e(d):n[t];r&&(i[r]=l),a(a.P+a.F*s,"String",i)},d=f.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=f},b0dc:function(t,e,r){var a=r("e4ae");t.exports=function(t,e,r,i){try{return i?e(a(r)[0],r[1]):e(r)}catch(n){var o=t["return"];throw void 0!==o&&a(o.call(t)),n}}},c5f6:function(t,e,r){"use strict";var a=r("7726"),i=r("69a8"),o=r("2d95"),n=r("5dbc"),s=r("6a99"),c=r("79e5"),l=r("9093").f,u=r("11e9").f,f=r("86cc").f,d=r("aa77").trim,p="Number",m=a[p],b=m,v=m.prototype,_=o(r("2aeb")(v))==p,h="trim"in String.prototype,g=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=h?e.trim():d(e,3);var r,a,i,o=e.charCodeAt(0);if(43===o||45===o){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+e}for(var n,c=e.slice(2),l=0,u=c.length;l<u;l++)if(n=c.charCodeAt(l),n<48||n>i)return NaN;return parseInt(c,a)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof m&&(_?c((function(){v.valueOf.call(r)})):o(r)!=p)?n(new b(g(e)),r,m):g(e)};for(var y,w=r("9e1e")?l(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)i(b,y=w[x])&&!i(m,y)&&f(m,y,u(b,y));m.prototype=v,v.constructor=m,r("2aba")(a,p,m)}},c8bb:function(t,e,r){t.exports=r("54a1")},d2d5:function(t,e,r){r("1654"),r("549b"),t.exports=r("584a").Array.from},dc9d:function(t,e,r){},f410:function(t,e,r){r("1af6"),t.exports=r("584a").Array.isArray},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);